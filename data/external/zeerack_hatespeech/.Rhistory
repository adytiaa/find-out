col_types = "cc")
file_2
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv")
file_1
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE)
file_3 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
file_2
file_3
file_3
file_2
mutate(file_2, X1 = as.character(X1))
file_4 <- mutate(file_2, X1 = as.character(X1))
file_4 == file_3
file_3$X1
file_4$X1
file_4$X1 == file_3$X1
file_3 <- file_3 %>% arrange(X1)
file_3
file_4
file_4 <- file_4 %>% arrange(X1)
file_4
file_3
file_3 == file_4
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
file_3 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE)
file_3 <- mutate(X1 = as.character(X1))
file_3
file_3 <- mutate(file_3, X1 = as.character(X1))
file_3
file_2
file_3 <- file_3 %>% arrange(X1)
file_4 <- file_4 %>% arrange(X1)
file_2 <- file_2 %>% arrange(X1)
file_2
file_3
file_2$X1 == file3_X1
file_2$X1 == file3$X1
file_2$X1 == file_3$X1
sum(file_2$X1 == file_3$X1)
mean(file_2$X1 == file_3$X1)
file_2
tail(file_2)
tail(file_3)
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv")
library(tidyverse)
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv")
file_!
file_1
file_1.5 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = "c")
file_1.5
file_1$TweetID
problems(...elt())
problems(...)
file_1.5 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = "cc")
problems()
problems(...)
file_1.5
file_1
glimpse(file_1)
glimpse(head(file_1))
file_t <- file_1[1:100]
file_t
glimpse(file_t)
library(tidyverse)
library(rtweet)
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = "ccccc")
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
file_1
file_2
# file_1
file_1 <- file_1 %>%
select(tweet_id = "TweetID", label = "Expert") %>%
filter(label == "both" | label == "sexism") %>%
mutate(label = replace(label, label == "both", "sexism"))
# file_2
file_2 <- file_2 %>%
select(tweet_id = "X1", label = "X2") %>%
filter(label == "sexism" | label == "none")
# Combine files, then remove duplicates, then take random sample grouped by
# label to balance classes
misogyny_data <- bind_rows(file_1, file_2) %>%
distinct(tweet_id, .keep_all = TRUE) %>%
group_by(label) %>%
sample_n(4242) %>%
ungroup() %>%
mutate(label = replace(label, label == "none", "not_misogynistic")) %>%
mutate(label = replace(label, label == "sexism", "misogynistic"))
miogyny_data
misogyny_data
file_2
unique(file_2$label)
file_2 %>% group_by(label) %>% count()
bind_rows(file_1, file_2) %>%
distinct(tweet_id, .keep_all = TRUE) %>%
group_by(label) %>% count()
misogyny_data
unique(misogyny_data$label
)
misogyny_data %>% group_by(label) %>% count()
file_1.5 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_1.5
unique(file_1.5$Expert)
library(tidyverse)
library(rtweet)
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
# file_1
file_1 <- file_1 %>%
filter(label == "both" | label == "sexism") %>%
mutate(label = replace(label, label == "both", "sexism"))
# file_1
file_1 <- file_1 %>%
select(tweet_id = "TweetID", label = "Expert") %>%
filter(label == "both" | label == "sexism") %>%
mutate(label = replace(label, label == "both", "sexism"))
file_1
# file_2
file_2 <- file_2 %>%
select(tweet_id = "X1", label = "X2") %>%
filter(label == "sexism" | label == "none")
# Combine files, then remove duplicates, then take random sample grouped by
# label to balance classes
misogyny_data <- bind_rows(file_1, file_2) %>%
distinct(tweet_id, .keep_all = TRUE) %>%
group_by(label) %>%
sample_n(4242) %>%
ungroup() %>%
mutate(label = replace(label, label == "none", "not_misogynistic")) %>%
mutate(label = replace(label, label == "sexism", "misogynistic"))
misogyny_data
misogyny_data %>% group_by(label) %>% count()
subset <- misogyny_data %>%
group_by(label) %>%
top_n(5) %>%
ungroup()
subset
subset <- misogyny_data %>%
group_by(label) %>%
top_n(5)
subset
df <- data.frame(x = c(10, 4, 1, 6, 3, 1, 1))
df %>% top_n(2)
subset <- misogyny_data %>%
top_n(5)
subset
misogyny_data %>% top_n(5)
misogyny_data
subset <- misogyny_data %>%
slice(1:10)
subset
subset <- misogyny_data %>%
slice(5)
subset
subset <- misogyny_data %>%
slice(1:5)
subset
lookup_statuses(subset)
lookup_statuses(subset$tweet_id)
lookup_tweets(subset$tweet_id)
tw <- lookup_tweets(subset$tweet_id)
tw %>% select(status_id, text)
tw <- tw %>% select(status_id, text)
left_join(subset, tw)
left_join(subset, tw, by = "status_id")
left_join(subset, tw, by = c("status_id" = "tweet_id")
left_join(subset, tw, by = c("status_id" = "tweet_id"))
left_join(subset, tw, by = c("tweet_id" = "status_id"))
glimpse(tw)
tw <- lookup_tweets(subset$tweet_id)
glimpse(tw)
tw
tw <- select(tw,
created_at,
user_id,
status_id,
text,
reply_to_status_id,
reply_to_user_id,
user_id,
country,
country_code,
location,
lang,
retweet_count,
is_retweet,
retweet_location,
retweet_status_id,
reply_count,
favorite_count,
retweet_favorite_count)
tw
library(tidyverse)
library(rtweet)
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
# file_1
file_1 <- file_1 %>%
select(status_id = "TweetID", label = "Expert") %>%
filter(label == "both" | label == "sexism") %>%
mutate(label = replace(label, label == "both", "sexism"))
file_1
file_2
# file_2
file_2 <- file_2 %>%
select(status_id = "X1", label = "X2") %>%
filter(label == "sexism" | label == "none")
file_2
# Combine files, then remove duplicates, then take random sample grouped by
# label to balance classes
misogyny_data <- bind_rows(file_1, file_2) %>%
distinct(status_id, .keep_all = TRUE) %>%
group_by(label) %>%
sample_n(4242) %>%
ungroup() %>%
mutate(label = replace(label, label == "none", "not_misogynistic")) %>%
mutate(label = replace(label, label == "sexism", "misogynistic"))
misogyny_data
misogyny_data %>% group_by(label) %>% count()
subset <- misogyny_data %>%
slice(1:5)
tweets <- lookup_tweets(subset$status_id)
tweets
subset
tweets <- select(tweets,
created_at,
user_id,
status_id,
text,
reply_to_status_id,
reply_to_user_id,
user_id,
country,
country_code,
location,
lang,
retweet_count,
is_retweet,
retweet_location,
retweet_status_id,
reply_count,
favorite_count,
retweet_favorite_count)
tweets
left_join(subset, tw)
left_join(subset, tweets)
left_join(subset, tweets, by = "status_id")
library(tidyverse)
library(rtweet)
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
# Combine files, then remove duplicates, then take random sample grouped by
# label to balance classes
misogyny_data <- bind_rows(file_1, file_2) %>%
distinct(status_id, .keep_all = TRUE) %>%
group_by(label) %>%
sample_n(4242) %>%
ungroup() %>%
mutate(label = replace(label, label == "none", "not_misogynistic")) %>%
mutate(label = replace(label, label == "sexism", "misogynistic"))
library(tidyverse)
library(rtweet)
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
# file_1
file_1 <- file_1 %>%
select(status_id = "TweetID", label = "Expert") %>%
filter(label == "both" | label == "sexism") %>%
mutate(label = replace(label, label == "both", "sexism"))
# file_2
file_2 <- file_2 %>%
select(status_id = "X1", label = "X2") %>%
filter(label == "sexism" | label == "none")
file_1
file_2
# Combine files, then remove duplicates, then take random sample grouped by
# label to balance classes
misogyny_data <- bind_rows(file_1, file_2) %>%
distinct(status_id, .keep_all = TRUE) %>%
group_by(label) %>%
sample_n(4242) %>%
ungroup() %>%
mutate(label = replace(label, label == "none", "not_misogynistic")) %>%
mutate(label = replace(label, label == "sexism", "misogynistic"))
misogyny_data
# Return Tweets by status_id
tweets <- lookup_tweets(misogyny_data$status_id)
tweets
# Select columns to match AWS data sets
tweets <- select(tweets,
created_at,
user_id,
status_id,
text,
reply_to_status_id,
reply_to_user_id,
user_id,
country,
country_code,
location,
lang,
retweet_count,
is_retweet,
retweet_location,
retweet_status_id,
reply_count,
favorite_count,
retweet_favorite_count)
tweets
# Join back to original misogyny data set to retrieve label
left_join(misogyny_data, tweets, by = "status_id")
# Join back to original misogyny data set to retrieve label
labelled_tweets <- left_join(misogyny_data,
tweets,
by = "status_id")
saveRDS(labelled_tweets, "labelled_tweets.rds")
labelled_tweets
# Remove any Tweets that were returned by the Twitter API
labelled_tweets <- labelled_tweets %>%
filter(text != NA)
labelled_tweets
# Join back to original misogyny data set to retrieve label
labelled_tweets <- left_join(misogyny_data,
tweets,
by = "status_id")
# Remove any Tweets that were returned by the Twitter API
labelled_tweets <-
labelled_tweets %>%
filter(text == NA)
labelled_tweets %>%
filter(text == NA)
# Join back to original misogyny data set to retrieve label
labelled_tweets <- left_join(misogyny_data,
tweets,
by = "status_id")
labelled_tweets
# Remove any Tweets that were returned by the Twitter API
labelled_tweets <- labelled_tweets %>%
drop_na(text)
labelled_tweets
labelled_tweets$reply_to_status_id
labelled_tweets
labelled_tweets %>% group_by(label) %>% count()
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
file_1
unique(file_1$Expert)
library(tidyverse)
library(rtweet)
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
# file_1
file_1 <- file_1 %>%
select(status_id = "TweetID", label = "Expert") %>%
filter(label == "both" | label == "sexism") %>%
mutate(label = replace(label, label == "both", "sexism"))
file_1
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
file_1
# file_1
file_1 <- file_1 %>%
select(status_id = "TweetID", label = "Expert") %>%
filter(label == "both" | label == "sexism" | label == "neither") %>%
mutate(label = replace(label, label == "both", "sexism"))
file_1
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
# file_1
file_1 <- file_1 %>%
select(status_id = "TweetID", label = "Expert") %>%
filter(label == "both" | label == "sexism" | label == "neither") %>%
mutate(label = replace(label, label == "both", "sexism"))
# file_2
file_2 <- file_2 %>%
select(status_id = "X1", label = "X2") %>%
filter(label == "sexism" | label == "none")
file_!
file_1
file_2
file_1 %>% groupby(label) %>% count()
file_1 %>% group_by(label) %>% count()
file_2 %>% group_by(label) %>% count()
961 + 3378
bind_rows(file_1, file_2) %>%
distinct(status_id, .keep_all = TRUE) %>%
group_by(label) %>% count()
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
# file_1
file_1 <- file_1 %>%
select(status_id = "TweetID", label = "Expert") %>%
filter(label == "both" | label == "sexism" | label == "neither") %>%
mutate(label = replace(label, label == "both", "sexism"))
# file_2
file_2 <- file_2 %>%
select(status_id = "X1", label = "X2") %>%
filter(label == "sexism" | label == "none")
bind_rows(file_1, file_2) %>%
distinct(status_id, .keep_all = TRUE) %>%
group_by(label) %>% count()
file_1
file_2
bind_rows(file_1, file_2) %>%
distinct(status_id, .keep_all = TRUE)
library(tidyverse)
library(rtweet)
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
file_1
file_2
file_1 <- file_1 %>%
select(status_id = "TweetID", label = "Expert") %>%
filter(label == "both" | label == "sexism" | label == "neither") %>%
mutate(label = replace(label, label == "both", "sexism"))
# file_2
file_2 <- file_2 %>%
select(status_id = "X1", label = "X2") %>%
filter(label == "sexism" | label == "none")
file_!
file_1
file_2
# Combine files, then remove duplicates, then take random sample grouped by
# label to balance classes
misogyny_data <- bind_rows(file_1, file_2) %>%
distinct(status_id, .keep_all = TRUE) %>%
mutate(label = replace(label, label == "neither", "not_misogynistic")) %>%
mutate(label = replace(label, label == "none", "not_misogynistic")) %>%
mutate(label = replace(label, label == "sexism", "misogynistic"))
misogyny_data
misogyny_data %>% group_by(label) %>% count()
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
# file_1
file_1 <- file_1 %>%
select(status_id = "TweetID", label = "Expert") %>%
filter(label == "both" | label == "sexism" ) %>%
mutate(label = replace(label, label == "both", "sexism"))
# file_2
file_2 <- file_2 %>%
select(status_id = "X1", label = "X2") %>%
filter(label == "sexism" | label == "none")
file_!
file_1 %>% group_by(label) %>% count()
file_2 %>% group_by(label) %>% count()
3378 +961
bind_rows(file_1, file_2) %>%
distinct(status_id, .keep_all = TRUE) %>% group_by(label) %>% count()
1
1
file_1 <- read_tsv("/home/mike/Documents/opt-out-master/hatespeech/NLP+CSS_2016.csv",
col_types = cols_only(TweetID = "c", Expert = "c"))
file_2 <- read_csv("/home/mike/Documents/opt-out-master/hatespeech/NAACL_SRW_2016.csv",
col_names = FALSE,
col_types = "cc")
# file_1
file_1 <- file_1 %>%
select(status_id = "TweetID", label = "Expert") %>%
filter(label == "both" | label == "sexism" | label == "neither") %>%
mutate(label = replace(label, label == "both", "sexism"))
# file_2
file_2 <- file_2 %>%
select(status_id = "X1", label = "X2") %>%
filter(label == "sexism" | label == "none")
file_1 %>% grounp_by(label) %>% count()
file_1 %>% group_by(label) %>% count()
file_2 %>% group_by(label) %>% count()
?distinct
